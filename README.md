# Weaver

Weaver æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ Go è¯­è¨€åº”ç”¨æ¡†æ¶ï¼Œä¸“æ³¨äºæä¾›ç®€å•ã€çµæ´»ä¸”åŠŸèƒ½å¼ºå¤§çš„åº”ç”¨ç¨‹åºæ„å»ºä½“éªŒã€‚

## ç‰¹æ€§

- ğŸš€ è½»é‡çº§è®¾è®¡
- ğŸ“¦ æ¨¡å—åŒ–æ¶æ„
- ğŸ”§ çµæ´»çš„é…ç½®ç®¡ç†
- ğŸ¯ ä¾èµ–æ³¨å…¥æ”¯æŒ
- ğŸ“ å†…ç½®æ—¥å¿—ç³»ç»Ÿ
- ğŸ› ï¸ ä¸°å¯Œçš„å·¥å…·é›†

## å®‰è£…

ç¡®ä¿ä½ çš„ Go ç‰ˆæœ¬ >= 1.22.7ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
go get github.com/jun3372/weaver
```

## å¿«é€Ÿå¼€å§‹

1. åˆ›å»ºä¸€ä¸ªæ–°çš„ Go é¡¹ç›®
2. åˆå§‹åŒ– Go æ¨¡å—
3. æ·»åŠ  Weaver ä¾èµ–

### åŸºç¡€ç¤ºä¾‹

```go
package main

import (
    "context"
    "github.com/jun3372/weaver"
)

type App struct {
    // ä½ çš„åº”ç”¨é…ç½®
}

func main() {
    ctx := context.Background()
    weaver.Run(ctx, func(ctx context.Context, app *App) error {
        // ä½ çš„åº”ç”¨é€»è¾‘
        return nil
    })
}
```

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ cmd/           # å‘½ä»¤è¡Œå·¥å…·
â”œâ”€â”€ examples/      # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ demo/      # æ¼”ç¤ºåº”ç”¨
â”‚   â”œâ”€â”€ hello/     # Hello World ç¤ºä¾‹
â”‚   â””â”€â”€ template/  # é¡¹ç›®æ¨¡æ¿
â”œâ”€â”€ internal/      # å†…éƒ¨åŒ…
â”œâ”€â”€ runtime/       # è¿è¡Œæ—¶æ”¯æŒ
â”œâ”€â”€ version/       # ç‰ˆæœ¬ä¿¡æ¯
â”œâ”€â”€ weaver.go     # æ ¸å¿ƒåŒ…
â””â”€â”€ widget.go     # ç»„ä»¶ç³»ç»Ÿ
```

## é…ç½®ç®¡ç†

Weaver ä½¿ç”¨ [Viper](https://github.com/spf13/viper) è¿›è¡Œé…ç½®ç®¡ç†ï¼Œæ”¯æŒå¤šç§é…ç½®æ ¼å¼ï¼š

- YAML
- JSON
- TOML
- ç¯å¢ƒå˜é‡
- å‘½ä»¤è¡Œå‚æ•°

### é…ç½®ç¤ºä¾‹

```yaml
# config.yaml
app:
  name: myapp
  port: 8080
```

## ä¸»è¦åŠŸèƒ½

### 1. ä¾èµ–æ³¨å…¥

Weaver æä¾›äº†ç®€å•è€Œå¼ºå¤§çš„ä¾èµ–æ³¨å…¥æœºåˆ¶ï¼Œå¸®åŠ©ä½ ç®¡ç†åº”ç”¨ç»„ä»¶ã€‚

### 2. æ—¥å¿—ç³»ç»Ÿ

å†…ç½® `slog` æ”¯æŒï¼Œæä¾›ç»“æ„åŒ–æ—¥å¿—è®°å½•åŠŸèƒ½ã€‚

### 3. ä¿¡å·å¤„ç†

è‡ªåŠ¨å¤„ç†ç³»ç»Ÿä¿¡å·ï¼ˆSIGINT, SIGQUIT, SIGTERMï¼‰ï¼Œç¡®ä¿åº”ç”¨ä¼˜é›…é€€å‡ºã€‚

## ç¤ºä¾‹

æŸ¥çœ‹ `examples` ç›®å½•è·å–æ›´å¤šç¤ºä¾‹ï¼š

- `examples/hello`: åŸºç¡€ç¤ºä¾‹
- `examples/demo`: å®Œæ•´åº”ç”¨ç¤ºä¾‹
- `examples/template`: é¡¹ç›®æ¨¡æ¿

## ä¾èµ–

- github.com/pkg/errors
- github.com/spf13/cobra
- github.com/spf13/viper
- golang.org/x/exp
- golang.org/x/tools
- gopkg.in/natefinch/lumberjack.v2

## ç‰ˆæœ¬è¦æ±‚

- Go 1.22.7 æˆ–æ›´é«˜ç‰ˆæœ¬

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚
